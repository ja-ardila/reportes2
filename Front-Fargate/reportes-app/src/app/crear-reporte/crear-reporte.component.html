<h1>Generar Reporte</h1>
<div class="botonregreso">
  <div class="boton">
    <a routerLink="/listado" class="btn btn-primary">Atrás</a>
  </div>
</div>
<form [formGroup]="formulario" (ngSubmit)="onSubmit()">
  <label>Empresa:</label>
  <input formControlName="empresa" type="text" required />

  <label>NIT:</label>
  <input formControlName="nit" type="text" required />

  <label>Dirección:</label>
  <input formControlName="direccion" type="text" required />

  <label>Teléfono:</label>
  <input formControlName="telefono" type="number" required />

  <label>Persona de contacto:</label>
  <input formControlName="contacto" type="text" required />

  <label>Email:</label>
  <input formControlName="email" type="email" required />

  <label>Ciudad:</label>
  <input formControlName="ciudad" type="text" required />

  <label>Fecha inicio:</label>
  <input formControlName="fechai" type="date" required />

  <label>Fecha cierre:</label>
  <input formControlName="fechac" type="date" required />

  <label>Hora inicio:</label>
  <input formControlName="horai" type="time" required />

  <label>Hora cierre:</label>
  <input formControlName="horac" type="time" required />

  <label>Servicio reportado:</label>
  <input formControlName="servicior" type="text" required />

  <label>Tipo de servicio:</label>
  <input formControlName="tiposervicio" type="text" required />

  <label>Informe:</label>
  <textarea formControlName="informe" maxlength="4500" rows="6"></textarea>
  <small>{{ formulario.get('informe')?.value?.length || 0 }} / 4500 caracteres</small>

  <label>Observaciones:</label>
  <textarea formControlName="observaciones" maxlength="3000" rows="5"></textarea>
  <small>{{ formulario.get('observaciones')?.value?.length || 0 }} / 3000 caracteres</small>

  <label>Cédula técnico:</label>
  <input formControlName="cedulat" type="number" required />

  <label>Firma técnico (selección):</label>
  <select formControlName="firma" required>
    <option value="">-- Seleccione técnico --</option>
    <option *ngFor="let tecnico of tecnicos" [value]="tecnico.id">{{ tecnico.nombre }}</option>
  </select>

  <label>Nombre técnico:</label>
  <input formControlName="nombret" type="text" required />

  <label>Cédula encargado:</label>
  <input formControlName="cedulae" type="number" required />

  <label>Nombre encargado:</label>
  <input formControlName="nombree" type="text" required />

  <label>Firma encargado (dibujo):</label>
  <canvas #firmaCanvas id="signature-pad" style="border:1px solid #000; width: 100%; height: 200px;"></canvas>
  <button type="button" id="clear" (click)="clearSignature()">Borrar Firma</button>
  <input type="hidden" formControlName="signature" />

  <label>Imágenes:</label>
  <input type="file" multiple (change)="onFileChange($event)" />

  <button type="submit">Generar Reporte</button>
</form>
